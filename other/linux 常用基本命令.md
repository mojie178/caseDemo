# linux 常用基本命令

## 显示时间指令：date

```powershell
# 显示时间 例：Wed May 23 09:08:13 CST 2018
$ date
# 显示年/月/日 例：2018/05/23
$ date +%Y/%m/%d
# 显示时/分/日 例：09:12
$ date +%H:%M
```

## 显示日历指令

```powershell
# 显示当前月份
$ cal
# 显示当年所有月份
$ cal 2018
# 显示指定年月
$ cal 10 2009
```

## 简单好用的计算器

```powershell
$ bc
```

## 重要的几个热键 [Tab], [ctrl]-c, [ctrl]-d

* Tab 按键：具有『命令补全』不『档案补齐』的功能
* Ctrl+c 按键：让当前的程序『停掉』
* Ctrl+d 按键：通常代表着：『键盘输入结束 (End Of File, EOF 戒 End OfInput)』的意思；另外，他也可以用来取代 exit。

## 数据同步写入磁盘

```powershell
$ sync
```
> 输入 sync，那举在内存中尚未被更新的数据，就会被写入硬盘中；所以，这个指令在系统关机戒重新启动前，很重要喔！最好多执行几次！

## 惯用的关机指令

```powershell
$ shutdown
  -t sec：-t 后面加秒数，亦即“过几秒后关机”的意思
  -k：不要真的关机，只是发送警告讯息出发
  -r：在将系统的服务停掉之后就重启
  -h：将系统的服务停掉后，立即关机
  -n：不经过 init 程序，直接以 shutdown 的功能关机
  -f：关机并开机之后，强制罗国 fsck 的磁盘检查
  -F：系统重新启动之后，强制进行 fsck 的磁盘检查
  -c：取消已经在进行的 shutdown 指令内容

# 告诉大家，这不机器会在十分钟后关机！并且会显示在目前登入者的屏幕上
$ shutdown -h 10 'I will shutdown after 10 mins'

# 立刻关机，其中 now 相当于时间为0的状态
$ shutdown -h now
# 系统在今天的20:25分会关机，若在21:25才下的指令，隔天才关机
$ shutdown -h 20:25
# 系统再过十分钟自动关机
$ shutdown -h +10
# 系统立刻重启
$ shutdown -r now
# 再过三十分钟系统重新启动，并显示讯息给所有在线使用者
$ shutdown -r +30 'The system will reboot'
# 仅发出警告信件参数
$ shutdown -k now 'This system will reboot'
```

## 切换执行等级

```powershell
$ init
```

__Linux 共有七种执行等级：__

* --run level 0：关机
* --run level 3：纯文本模式
* --run level 5：含有图形接口模式
* --run level 6：重新启动

> 使用 init 这个指令来切换各模式：
> 如果你想要关机的话，除了上述的 shutdown -h now 以及 poweroff 之外，你也可以使用如下的指令来关机：\$ init 0

## 改变文件的所属群组

```powershell
$ chgrp
  -R：递归处理，将指令目录下的所有文件及子目录一并处理

# 将 /user/meng 及其子目录下的所有文件的用户改为 mengxin
$ chgrp -R mengxin /user/meng
```

## 改变文件拥有者

```powershell
$ chown [-R] 账号名称 档案或目录
  -R：递归处理，将指令目录下的所有文件及子目录一并处理

# 将 install.log 的拥有者改为 bin 这个账号
$ chown bin install.log
$ ls -l
-rw-r--r-- l bin users 68495 Jun 25 08:53 install.log
# 将 install.log 的拥有者与群组改回为 root
$ chown root:root install.log
$ ls -l
-rw-r--r-- l root root 68495 Jun 25 08:53 install.log
```

## 改变文件的权限

权限范围的表示法如下：
u User，即文件或目录的拥有者；
g Group，即文件或目录的所属群组；
o Other，除了文件或目录拥有者或所属群组之外，其他用户皆属于这个范围；
a All，即全部的用户，包含拥有者，所属群组以及其他用户；
r 读取权限，数字代号为“4”；
w 写入权限，数字代号为“2”；
x 执行或切换权限，数字代号为“1”；
- 不具任何权限，数字代号为“0”；
s 特殊功能说明：变更文件或目录的权限。

```powershell
$ chmod
  -c：效果类似 “-v” 参数，但仅回报更改的部分；
  -f：不显示错误信息；
  -R：递归处理，将指令目录下的所有文件及子目录一并处理；
  -v：显示指令执行过程；
  --reference=<参考文件或目录>：把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同；

  <权限范围>+<权限设置>：开启权限范围的文件或目录的该选项权限设置；
  <权限范围>-<权限设置>：关闭权限范围的文件或目录的该选项权限设置；
  <权限范围>=<权限设置>：指定权限范围的文件或目录的该选项权限设置；
```

## 查看版本信息

```powershell
# 可显示电脑以及操作系统的相关信息
$ uname -a
# 适用于所有的 linux，包括 Redhat、SuSE、Debian 等发行版，但是在 debian 下要安装 lsb
$ lsb_release -a
```

## 变换目录

```powershell
# 最重点的就是目录的绝对路径与相关路径，还有一些特殊目录的符号
$ cd [相对路径或绝对路径]
# 代表去到 vbird 这个用户的家目录，即 /home/vbird
$ cd ~vbird
# 回到自己的家目录，即 /root 这个目录
$ cd ~
# 没有加任何路径，还是代表回到自己家目录
$ cd
# 去到目前的上层目录，即 /root 的上层目录
$ cd ..
# 回到刚刚的目录也就是 /root
$ cd -
```

## 显示当前所在目录

```powershell
$ pwd
```

## 建立新目录

```powershell
$ mkdir [-mp] 目录名称
  -m：配置文件的权限，直接设定，不需要看预设权限
  -p：直接将所需要的目录（包括上层目录）递归建立
```

## 删除『空』的目录

```powershell
$ rmdir [-p] 目录名称
  -p：连同上层“空的”目录也一起删除
```

## 档案与目录的显示

```powershell
$ ls
  -a：显示所有档案及目录（ls 内定将档案名或目录名称为“.”的视为影藏，不会列出）；
  -A：显示除影藏文件“.”和“..”以外的所有文件列表；
  -C：多列显示输出结果。这是默认选项；
  -l：与 “-C” 选项功能相反，所有输出信息用单列格式输出，不输出为多列；
  -F：在每个输出项后追加文件的类型标识符，具体含义：“*”表示具有可执行权限的普通文件，“/”表示目录，“@”表示符号链接，“|”表示命令管道 FIFO，“=”表示 sockets 套接字。当文件为普通文件时，不输出任何标识符；
  -b：将文件中的不可输出的字符以反斜线“”加字符编码的方式输出；
  -c：与 “-lt” 选项连用时，按照文件状态时间排序输出目录内容，排序的依据是文件的索引节点中的 ctime 字段。与“-l”选项连用时，则排序的一句是文件的状态改变时间；
  -d：仅显示目录名，而不显示目录下的内容列表。显示符号链接文件本身，而不显示其所指向的目录列表；
  -f：此参数的效果和同时指定“aU”参数相同，并关闭 “lst” 参数的效果；
  -i：显示文件索引节点号（inode）。一个索引节点代表一个文件；
  --file-type：与 “-F” 选项的功能相同，但是不显示“*”；
  -k：以 KB（千字节）为单位显示文件大小；
  -l：以长格式显示目录下的内容列表。输出的信息从左到右依次包括文件名，文件类型、权限模式、硬连接数、所有者、组、文件大小和文件的最后修改时间等；
  -m：用“,”号区隔每个文件和目录的名称；
  -n：以用户识别码和群组识别码替代其名称；
  -r：以文件名反序排列并输出目录内容列表；
  -s：显示文件和目录的大小，以区块为单位；
  -t：用文件和目录的更改时间排序；
  -L：如果遇到性质为符号链接的文件或目录，直接列出该链接所指向的原始文件或目录；
  -R：递归处理，将指定目录下的所有文件及子目录一并处理；
  --full-time：列出完整的日期与时间；
  --color[=WHEN]：使用不同的颜色高亮显示不同类型的。
```

## 复制档案或目录

```powershell
$ cp
  -a：此参数的效果和同时指定 "-dpR" 参数相同；
  -d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录；
  -f：强行复制文件或目录，不论目标文件或目录是否已存在；
  -i：覆盖既有文件之前先询问用户；
  -l：对源文件建立硬连接，而非复制文件；
  -p：保留源文件或目录的属性；
  -R/r：递归处理，将指定目录下的所有文件与子目录一并处理；
  -s：对源文件建立符号连接，而非复制文件；
  -u：使用这项参数后只会在源文件的更改时间较目标文件更新时或是名称相互对应的目标文件并不存在时，才复制文件；
  -S：在备份文件时，用指定的后缀 “SUFFIX” 代替文件的默认后缀；
  -b：覆盖已存在的文件目标前将目标文件备份；
  -v：详细显示命令执行的操作。`
```

* 源文件：制定源文件列表。默认情况下，cp 命令不能复制目录，如果要复制目录，则必须使用 -R 选项；
* 目标文件：指定目标文件。当“源文件”为多个文件时，要求“目标文件”为指定的目录。

## 移除档案或目录

```powershell
$ rm
  -d：直接把欲删除的目录的硬连接数据删除成0，删除该目录；
  -f：强制删除文件或目录；
  -i：删除已有文件或目录之前先询问用户；
  -r或-R：递归处理，将指定目录下的所有文件与子目录一并处理；
  --preserve-root：不对根目录进行递归操作；
  -v：显示指令的详细执行过程。
```
> 文件：指定被删除的文件列表，如果参数中含有目录，则必须加上 -r 或者 -R 选项。

## 移动档案与目录

```powershell
$ mv
  --backup=<备份模式>：若需覆盖文件，则覆盖前先行备份；
  -b：当文件存在时，覆盖前，为其创建一个备份；
  -f：若目标文件或目录与现有的文件或目录重复，则直接覆盖现有的文件或目录；
  -i：交互式操作，覆盖前先行询问用户，如果源文件与目标文件或目标目录中的文件同名，则询问用户是否覆盖目标文件。用户输入 ”y”，表示将覆盖目标文件；输入 ”n”，表示取消对源文件的移动。这样可以避免误将文件覆盖。
  --strip-trailing-slashes：删除源文件中的斜杠“/”；
  -S<后缀>：为备份文件指定后缀，而不使用默认的后缀；
  --target-directory=<目录>：指定源文件要移动到目标目录；
  -u：当源文件比目标文件新或者目标文件不存在时，才执行移动操作。
```

## 取得路径的文件名与目录名

```powershell
# 获取文档名称为 network
$ basename /etc/sysconfig/network
# 获取目录名称为 /etc/sysconfig
$ dirname /etc/sysconfig/network
```

## 显示文件的内容

cat 命令连接文件并打印到标准输出设备上，cat 经常用来显示文件的内容

```powershell
$ cat
  -n 或 -number：有1开始对所有输出的行数编号；
  -b 或 --number-nonblank：和-n相似，只不过对于空白行不编号；
  -s 或 --squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行；
  -A：显示不可打印字符，行尾显示“$”；
  -e：等价于 "-vE" 选项；
  -t：等价于 "-vT" 选项；
```
> __tac__ 是 cat 的倒着写

## 输出行号

```powershell
$ nl
  -b ：指定行号指定的方式，主要有两种：
    -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；
    -b t ：如果有空行，空的那一行不要列出行号(默认值)；

  -n ：列出行号表示的方法，主要有三种：
      -n ln ：行号在萤幕的最左方显示；
      -n rn ：行号在自己栏位的最右方显示，且不加 0 ；
      -n rz ：行号在自己栏位的最右方显示，且加 0 ；

  -w ：行号栏位的占用的位数。
  -p ：在逻辑定界符处不重新开始计算。
```

## 分页显示档案内容

```powershell
$ more
  -<数字>：指定每屏显示的行数；
  -d：显示“[press space to continue,'q' to quit.]” 和 “[Press 'h' for instructions]”；
  -c：不进行滚屏操作。每次刷新这个屏幕；
  -s：将多个空行压缩成一行显示；
  -u：禁止下划线；
  +<数字>：从指定数字的行开始显示。
```

* 与 more 类似，但是比 more 更好的是，他可以往前翻页：__less__
* 只看头几行：__head__，只看尾几行：__tail__

## 修改档案时间或新建档案

```powershell
$ touch
  -a：或 --time=atime 或 --time=access 或 --time=use  只更改存取时间；
  -c：或--no-create 不建立任何文件；
  -d：<时间日期> 使用指定的日期时间，而非现在的时间；
  -f：此参数将忽略不予处理，仅负责解决 BSD 版本 touch 指令的兼容性问题；
  -m：或 --time=mtime 或 --time=modify 只更该变动时间；
  -r：<参考文件或目录> 把指定文件或目录的日期时间，统统设成和参考文件或目录的日期时间相同；
  -t：<日期时间> 使用指定的日期时间，而非现在的时间；
  --help：在线帮助；
  --version：显示版本信息。
```

## 配置文件档案隐藏属性

```powershell
$ chattr
  -R：递归处理，将指令目录下的所有文件及子目录一并处理；
  -v<版本编号>：设置文件或目录版本；
  -V：显示指令执行过程；
  +<属性>：开启文件或目录的该项属性；
  -<属性>：关闭文件或目录的该项属性；
  =<属性>：指定文件或目录的该项属性。
```
> 显示档案隐藏属性：__lsattr__

## 观察文件类型

```powershell
$ file
  -b：列出辨识结果时，不显示文件名称；
  -c：详细显示指令执行过程，便于排错或分析程序执行的情形；
  -f<名称文件>：指定名称文件，其内容有一个或多个文件名称时，让file依序辨识这些文件，格式为每列一个文件名称；
  -L：直接显示符号连接所指向的文件类别；
  -m<魔法数字文件>：指定魔法数字文件；
  -v：显示版本信息；
  -z：尝试去解读压缩文件的内容。
```

## 寻找特定档案

```powershell
$ locate
  -i：忽略大小写的差异；
  -r：后面可接正规表示法的显示方式；
  -d：<目录>或--database=<目录>：指定数据库所在的目录；
  -u：更新slocate数据库；
  --help：显示帮助；
  --version：显示版本信息。
```

## 压缩文件和读取压缩文件

```powershell
$ gzip
  -a 或 ——ascii：使用ASCII文字模式；
  -d 或 --decompress 或 ----uncompress：解开压缩文件；
  -f 或 ——force：强行压缩文件。不理会文件名称或硬连接是否存在以及该文件是否为符号连接；
  -h 或 ——help：在线帮助；
  -l 或 ——list：列出压缩文件的相关信息；
  -L 或 ——license：显示版本与版权信息；
  -n 或 --no-name：压缩文件时，不保存原来的文件名称及时间戳记；
  -N 或 ——name：压缩文件时，保存原来的文件名称及时间戳记；
  -q 或 ——quiet：不显示警告信息；
  -r 或 ——recursive：递归处理，将指定目录下的所有文件及子目录一并处理；
  -S 或<压缩字尾字符串>或 ----suffix <压缩字尾字符串>：更改压缩字尾字符串；
  -t 或 ——test：测试压缩文件是否正确无误；
  -v 或 ——verbose：显示指令执行过程；
  -V 或 ——version：显示版本信息；
  -<压缩效率>：压缩效率是一个介于1~9的数值，预设值为“6”，指定愈大的数值，压缩效率就会愈高；
  --best：此参数的效果和指定“-9”参数相同；
  --fast：此参数的效果和指定“-1”参数相同。
```
> __zcat__ 用于不真正解压缩文件，就能显示压缩包中文件的内容的场合。

